---
title: "Pixgallery usage"
subtitle: "Generate an image gallery"
date: last-modified
date-format: "DD-MMM-YYYY"
encoding: "UTF-8"
format:
  html:
    toc: true
    number-sections: true
    code-overflow: wrap
    resources:
      - images
---

This is a demo of the function `pixgallery()`. This creates an interactive gallery of images. The mandatory input required is one or more paths/URLs to image(s).

```{r}
#| code-fold: true
#| label: image-paths

library(pixture)
options(encoding = "UTF-8")
paths_a <- c(
  "https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/7604425/pexels-photo-7604425.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/4666748/pexels-photo-4666748.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/4932184/pexels-photo-4932184.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/4210900/pexels-photo-4210900.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/3126574/pexels-photo-3126574.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/167699/pexels-photo-167699.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1376201/pexels-photo-1376201.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/7919/pexels-photo.jpg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/2437291/pexels-photo-2437291.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1679772/pexels-photo-1679772.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1183099/pexels-photo-1183099.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1813513/pexels-photo-1813513.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/931018/pexels-photo-931018.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/267074/pexels-photo-267074.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/4622893/pexels-photo-4622893.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"
)

paths_b <- c(
  "https://images.pexels.com/photos/572897/pexels-photo-572897.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/7604425/pexels-photo-7604425.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/4666748/pexels-photo-4666748.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/4932184/pexels-photo-4932184.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/4210900/pexels-photo-4210900.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/3126574/pexels-photo-3126574.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/167699/pexels-photo-167699.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1376201/pexels-photo-1376201.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/7919/pexels-photo.jpg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/2437291/pexels-photo-2437291.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1679772/pexels-photo-1679772.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1183099/pexels-photo-1183099.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1813513/pexels-photo-1813513.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/931018/pexels-photo-931018.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/267074/pexels-photo-267074.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/4622893/pexels-photo-4622893.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1624600/pexels-photo-1624600.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/851023/pexels-photo-851023.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/1694631/pexels-photo-1694631.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/2325447/pexels-photo-2325447.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/2743287/pexels-photo-2743287.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",
  "https://images.pexels.com/photos/189349/pexels-photo-189349.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"
)
```

Clicking on the thumbnail opens up the full image in a lightbox. The whole gallery can be browsed through the lightbox using left or right arrow keys.

```{r}
#| label: default-gallery
pixgallery(paths_a)
```

## Captions

Optionally, captions can be added to the images which are visible when viewed in the lightbox.

```{r}
#| label: caption-gallery
captions <- c("night", "forest", "shark", "coconut trees", "flowers", "field", "misty", "leaves", "sunset", "mountains", "swamp", "rainstorm", "leaves", "beach", "leopard", "sunflower")
pixgallery(paths_a, caption = captions)
```

```{r}
#| code-fold: true
#| label: long-captions

captions_long <- c(
  "The night sky blanketed the quiet village as stars twinkled in the peaceful darkness.",
  "A stroll through the forest reveals nature's hidden gems and the call of wild creatures.",
  "Snorkeling with a shark is an unforgettable experience for adventure seekers and marine life lovers.",
  "Sipping coconut water on a hammock under swaying palms is pure tropical bliss.",
  "Blooming flowers in the meadow create a splash of color and a perfect photo opportunity.",
  "Children laughed and played in the vast field of golden wheat under the summer sun.",
  "Misty mornings in the valley offer a surreal, almost dreamlike atmosphere to early risers.",
  "Autumn leaves crunch underfoot as you hike through the serene woodland trails.",
  "A breathtaking sunset paints the sky in hues of orange, pink, and purple.",
  "Snow-capped mountains tower majestically over the valley below, inviting explorers to their icy peaks.",
  "The dense swamp is teeming with life, from croaking frogs to towering mangroves.",
  "Caught in a rainstorm, we sought shelter under an old oak tree on the path.",
  "The thick canopy of leaves shields forest walkers from the midday sun's strong rays.",
  "Crystal-clear waters and white sands define the idyllic, unspoiled beach destination of your dreams.",
  "A leopard stealthily navigates the snowy terrain, its spotted coat blending with the winter landscape.",
  "Sunflowers turn their faces to the sun, creating a sea of yellow that stretches to the horizon."
)
```

Images without captions can be set as NA.

```{r}
#| label: na-captions
pixgallery(paths_a[1:4], caption = c("night", "forest", NA, "coconut trees"))
```

```{r}
#| label: single-caption
pixgallery(paths_a[1], caption = "night")
```

### Caption parameters

Captions have further properties `caption_valign` and `caption_halign` which allows for captions to be displayed on the thumbnails.

`caption_valign` options are `top`, `center`, `bottom` or `below`.

```{r}
#| label: caption-valign
pixgallery(paths_a[1:4], caption = captions[1:4], caption_valign = "top")
```

```{r}
#| label: caption-valign-center
pixgallery(paths_a[1:4], caption = captions[1:4], caption_valign = "center")
```

```{r}
#| label: caption-valign-bottom
pixgallery(paths_a[1:4], caption = captions[1:4], caption_valign = "bottom")
```

```{r}
#| label: caption-valign-below
pixgallery(paths_a[1:4], caption = captions[1:4], caption_valign = "below")
```

`caption_halign` options are `left`, `center` or `right`.

```{r}
#| label: caption-halign-center
pixgallery(paths_a[1:4], caption = captions[1:4], caption_valign = "center", caption_halign = "center")
```

```{r}
#| label: caption-halign-right
pixgallery(paths_a[1:4], caption = captions[1:4], caption_valign = "below", caption_halign = "right")
```

With long captions.

```{r}
#| label: long-caption-valign-top
pixgallery(paths_a[1:4], caption = captions_long[1:4], caption_valign = "top")
```

```{r}
#| label: long-caption-valign-below
pixgallery(paths_a[1:4], caption = captions_long[1:4], caption_valign = "below")
```

## Link

The default is TRUE, which means that clicking on the thumbnail opens the image in a lightbox. Setting this to FALSE turns off links.

```{r}
#| label: no-link
pixgallery(paths_a[1:4], link = FALSE)
```

By setting this to a character vector, you can add custom links.

```{r}
#| label: custom-link
pixgallery(paths_a[1:4], link = c("https://en.wikipedia.org/wiki/Milky_Way", "https://en.wikipedia.org/wiki/Rainforest", "https://en.wikipedia.org/wiki/Shark", "https://en.wikipedia.org/wiki/Hawaii"))
```

## Dimension

The parameters `h` and `w` is used to adjust the dimension of images in the grid. This value is a string in any valid CSS unit.

```{r}
#| label: height-adjust
pixgallery(paths_a, h = "50px")
```

```{r}
#| label: width-adjust
pixgallery(paths_b, w = "100px")
```

## Gap

The parameter `gap` is used to control spacing between images in the grid. This value is a string in any valid css unit.

```{r}
#| label: gap-adjust
pixgallery(paths_a[1:8], gap = "20px")
```

```{r}
#| label: gap-no-spacing
pixgallery(paths_a, gap = "0", w = "40px")
```

## Border radius

Adjust the corner radius of image thumbnails.

```{r}
#| label: border-radius
pixgallery(paths_a, w = "100px", border_radius = "10px")
```

## Shuffle

Randomly shuffle images around.

```{r}
#| label: shuffle
pixgallery(paths_a, w = "50px", shuffle = TRUE)
```

```{r}
#| label: shuffle-with-captions
pixgallery(paths_a, w = "50px", shuffle = TRUE, caption = c("night", "forest", "shark", "coconut trees", "flowers", "field", "misty", "leaves", "sunset", "mountains", "swamp", "rainstorm", "leaves", "beach", "leopard", "sunflower"))
```

## Layout

You can set different layouts using the `layout` parameter, with the default being `layout="grid"` for a responsive grid design.

### Fixed

With the default 'grid' layout, the height is fixed and the width is mostly fixed, but has some flexibility such that the whole gallery takes up the entire width of available parent space. In 'fixed' layout, the thumbnail dimensions are strictly fixed. Adjust the width of the page to see the difference in responsiveness compared to 'grid' layout.

```{r}
#| label: fixed-layout
pixgallery(paths_a[1:8], layout = "fixed")
```

With customization.

```{r}
#| label: fixed-layout-custom
pixgallery(paths_a[1:8], layout = "fixed", caption = captions[1:8], caption_valign = "center", caption_halign = "center", border_radius = "50%", gap = "10px")
```

With long captions.

```{r}
#| label: fixed-layout-long-captions-top
pixgallery(paths_a[1:8], layout = "fixed", caption = captions_long[1:8], caption_valign = "top")
```

```{r}
#| label: fixed-layout-long-captions-below
pixgallery(paths_a[1:8], layout = "fixed", caption = captions_long[1:8], caption_valign = "below")
```

### Mosaic

Similar to grid layout but with some mixed size cells.

```{r}
#| label: mosaic-layout
pixgallery(paths_b, layout = "mosaic")
```

With customization.

```{r}
#| label: mosaic-layout-custom-bottom
pixgallery(paths_a, layout = "mosaic", caption = captions, caption_valign = "bottom", h = "100px", w = "100px")
```

```{r}
#| label: mosaic-layout-custom-below
pixgallery(paths_a, layout = "mosaic", caption = captions, caption_valign = "below", h = "100px", w = "100px", border_radius = "5px", shuffle = TRUE)
```

With long captions.

```{r}
#| label: mosaic-layout-long-captions-top
pixgallery(paths_a[1:8], layout = "mosaic", caption = captions_long[1:8], caption_valign = "top")
```

```{r}
#| label: mosaic-layout-long-captions-below
pixgallery(paths_a[1:8], layout = "mosaic", caption = captions_long[1:8], caption_valign = "below")
```

### Masonry

Column-wise layout with free height. The thumbnail width can be adjusted. This works best for a set of images with mixed aspect ratios, for example; a mix of portrait and landscape images.

```{r}
#| label: masonry-layout
pixgallery(paths_b, layout = "masonry")
```

With customization.

```{r}
#| label: masonry-layout-custom-bottom
pixgallery(paths_a, layout = "masonry", caption = captions, caption_valign = "bottom", w = "100px")
```

```{r}
#| label: masonry-layout-custom-below
pixgallery(paths_a, layout = "masonry", caption = captions, caption_valign = "below", w = "100px", border_radius = "5px", shuffle = TRUE)
```

With long captions.

```{r}
#| label: masonry-layout-long-captions-top
pixgallery(paths_a[1:8], layout = "masonry", caption = captions_long[1:8], caption_valign = "top")
```

```{r}
#| label: masonry-layout-long-captions-below
pixgallery(paths_a[1:8], layout = "masonry", caption = captions_long[1:8], caption_valign = "below")
```

### Justified

Row-wise layout with free width. The thumbnail height can be adjusted. This works best for a set of images with mixed aspect ratios, for example; a mix of portrait and landscape images.

```{r}
#| label: justified-layout
pixgallery(paths_b, layout = "justified")
```

With customization.

```{r}
#| label: justified-layout-custom-bottom
pixgallery(paths_a, layout = "justified", caption = captions, caption_valign = "bottom", h = "100px")
```

```{r}
#| label: justified-layout-custom-below
pixgallery(paths_a, layout = "justified", caption = captions, caption_valign = "below", h = "100px", border_radius = "5px", shuffle = TRUE)
```

With long captions.

```{r}
#| label: justified-layout-long-captions-top
pixgallery(paths_a[1:8], layout = "justified", caption = captions_long[1:8], caption_valign = "top")
```

```{r}
#| label: justified-layout-long-captions-below
pixgallery(paths_a[1:8], layout = "justified", caption = captions_long[1:8], caption_valign = "below")
```

### Scroll

Single row layout with horizontal scrolling.

```{r}
#| label: scroll-layout
pixgallery(paths_b, layout = "scroll")
```

With customization.

```{r}
#| label: scroll-layout-custom-bottom
pixgallery(paths_a, layout = "scroll", caption = captions, caption_valign = "bottom", h = "100px")
```

```{r}
#| label: scroll-layout-custom-below
pixgallery(paths_a, layout = "scroll", caption = captions, caption_valign = "below", h = "100px", w = "150px", border_radius = "5px", shuffle = TRUE)
```

With long captions.

```{r}
#| label: scroll-layout-long-captions-top
pixgallery(paths_a[1:8], layout = "scroll", caption = captions_long[1:8], caption_valign = "top")
```

```{r}
#| label: scroll-layout-long-captions-below
pixgallery(paths_a[1:8], layout = "scroll", caption = captions_long[1:8], caption_valign = "below")
```

### Elastic

Single row gallery where images expand on hover. `h` sets the height of the gallery. `gap` adjusts spacing between thumbnails. `caption_valign` and `caption_halign` are disabled.

```{r}
#| label: elastic-layout
pixgallery(paths_b, layout = "elastic")
```

With customization.

```{r}
#| label: elastic-layout-custom
pixgallery(paths_a, layout = "elastic", gap = "0", h = "50px")
```

```{r}
#| label: elastic-layout-custom-border-radius
pixgallery(paths_a, layout = "elastic", border_radius = "5px", caption = captions)
```

Works better when there are more than a handful of images.

```{r}
#| label: elastic-layout-few-images
pixgallery(paths_a[1:4], layout = "elastic")
```

### Rhombus

Thumbnails are diamond shaped. Options `caption_valign = "below"` and `w` are disabled.

```{r}
#| label: rhombus-layout
pixgallery(paths_b, layout = "rhombus")
```

With customization.

```{r}
#| label: rhombus-layout-custom
pixgallery(paths_a[1:6], layout = "rhombus", gap = "2px", caption = captions[1:6], caption_valign = "center", caption_halign = "center", border_radius = "8px", h = "250px", shuffle = TRUE)
```

With long captions.

```{r}
#| label: rhombus-layout-long-captions
pixgallery(paths_a[1:6], layout = "rhombus", gap = "2px", caption = captions_long[1:6], caption_valign = "center", caption_halign = "center")
```

### Compatibility

All parameters are not applicable to every layout. The table below indicates which parameters are active for each layout type.

:::{.column-body-outset}

```{r}
#| label: layout-compatibility
#| echo: false

dfr <- data.frame(
  "parameter" = c("caption", "caption_valign", "", "caption_halign", "link", "h", "w", "gap", "border_radius", "shuffle"),
  "option"    = c("", "over^1^", "below", "", "", "", "", "", "", ""),
  "grid"      = c("游릴", "游릴", "游릴", "游릴", "游릴", "游댯", "游릴", "游릴", "游릴", "游릴"),
  "fixed"     = c("游릴", "游리", "游릴", "游릴", "游릴", "游릴", "游릴", "游릴", "游릴", "游릴"),
  "mosaic"    = c("游릴", "游릴", "游릴", "游릴", "游릴", "游댯", "游릴", "游릴", "游릴", "游릴"),
  "masonry"   = c("游릴", "游릴", "游릴", "游릴", "游릴", "游댮", "游릴", "游릴", "游릴", "游릴"),
  "justified" = c("游릴", "游리", "游", "游릴", "游릴", "游릴", "游댮", "游릴", "游릴", "游릴"),
  "elastic"   = c("游릴", "游댮", "游댮", "游댮", "游릴", "游릴", "游댮", "游릴", "游릴", "游릴"),
  "scroll"    = c("游릴", "游리", "游릴", "游릴", "游릴", "游릴", "游릴", "游릴", "游릴", "游릴"),
  "rhombus"   = c("游릴", "游리", "游댮", "游릴", "游릴", "游릴", "游댮", "游릴", "游릴", "游릴")
)
# rownames(dfr) <- dfr$parameter
# dfr$parameter <- NULL
knitr::kable(dfr, escape = FALSE)
```

^1^ top/center/bottom  
<br>
游릴 *Functional*  
游리/游/游댯 *Known issues*  
游댮 *Inactive/Disabled*  
  
游리 *Long captions may extend beyond the images and/or clipped. Set height/width manually (`h="300px"`, `h="100%"` etc)*  
游 *Long captions force images to be stretched*  
游댯 *Height cannot be adjusted when captions are displayed*  

This may not be complete. This is work in progress.

```{r}
#| include: false
#| eval: false

dfr <- setNames(
  as.data.frame(matrix(c(
    "游릴", "游릴", "游릴", "游릴", "游릴", "游릴",
    "游릴", "游리", "游리", "游릴", "游릴", "游릴",
    "游릴", "游릴", "游리", "游릴", "游릴", "游릴",
    "游릴", "游릴", "游릴", "游릴", "游릴", "游릴",
    "游릴", "游릴", "游리", "游릴", "游릴", "游릴",
    "游릴", "游릴", "游리", "游릴", "游릴", "游릴",
    "游릴", "游릴", "游릴", "游릴", "游릴", "游릴",
    "游릴", "游댮", "游리", "游릴", "游릴", "游릴",
    "游릴", "游댮", "游리", "游릴", "游릴", "游릴",
    "游릴", "游댮", "游릴", "游릴", "游릴", "游릴",
    "游릴", "游댮", "游리", "游릴", "游릴", "游릴",
    "游릴", "游댮", "游리", "游릴", "游릴", "游릴",
    "游릴", "游릴", "游댮", "游릴", "游릴", "游릴",
    "游릴", "游릴", "游댮", "游릴", "游릴", "游릴",
    "游릴", "游릴", "游댮", "游릴", "游릴", "游릴",
    "游릴", "游릴", "游댮", "游릴", "游릴", "游릴",
    "", "", "", "", "", "",
    "", "", "", "", "", "",
    "游릴", "游댮", "游댮", "游릴", "游댮", "游릴",
    "", "", "", "", "", "",
    "", "", "", "", "", ""
  ), ncol = 6, byrow = TRUE)),
  c("link", "h", "w", "gap", "border_radius", "shuffle")
)

rownames(dfr) <- paste(
  rep(c("grid", "fixed", "mosaic", "masonry", "justified", "elastic", "rhombus"), each = 3),
  rep(c("no caption/valign none", "caption over", "caption below"), 3)
)
knitr::kable(dfr)
```

:::

## Local images

Local images (not on the internet) can be provided as relative or absolute paths. The images do not show up in the RStudio notebook preview, but they should work in a rendered HTML document.

<p style="color: #8a6d3b;background-color: #fcf8e3;border-color:#faebcc;padding: 1em;border-radius: 4px;" style="inline-block">
<i class="fas fa-exclamation-circle"></i> &nbsp; Pixture does not move, copy or embed images. The images must be in their final intended destination. It is left to the user to handle images as assets. Images are not embedded into self contained documents.
</p>

### Relative path

This example assumes your images are available next to the Rmd/qmd/HTML file in a directory named *images* and that you copy these assets if the Rmd/qmd/HTML is relocated.

```{r}
#| label: relative-path
paths <- list.files("images", full.names = TRUE)
paths
pixgallery(paths, h = "300px")
```

### Absolute path

Here is an example using sample images from the package. These should work locally, but may not work if the rendered HTML is relocated.

```{r}
#| label: absolute-path
paths <- list.files(system.file("extdata/images", package = "pixture"), full = TRUE)
paths
# pixgallery(paths)
```

## Session

```{r}
#| label: session-info
sessionInfo()
```
